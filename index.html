<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Bad Peach Meal Plan Calculator</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Anton&display=swap" rel="stylesheet">

  <style>
    /* ===== CSS RESET (modern) ===== */
    *, *::before, *::after { box-sizing: border-box; }
    html, body { height: 100%; }
    body { margin: 0; line-height: 1.6; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; }
    img, picture, video, canvas, svg { display: block; max-width: 100%; }
    input, button, textarea, select { font: inherit; }
    button { cursor: pointer; }

    /* ===== THEME ===== */
    :root {
      --bg: #f7f7f7;
      --card: #ffffff;
      --ink: #191919; /* requested subtitle color */
      --muted: #6b7280;
      --brand: #111111; /* deep ink for accents */
      --accent: #ff6b6b; /* subtle peach pop for focus/accents */
      --radius-lg: 20px;
      --radius-xl: 28px;
      --shadow-sm: 0 2px 10px rgba(0,0,0,.05);
      --shadow-md: 0 10px 30px rgba(0,0,0,.08);
      --maxw: 1120px;
    }

    body {
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      color: var(--ink);
      background: linear-gradient(180deg, #fafafa 0%, #f2f2f2 100%);
    }

    .wrap {
      max-width: var(--maxw);
      margin-inline: auto;
      padding: clamp(16px, 2vw + 8px, 32px);
    }

    /* ===== HEADER ===== */
    header {
      display: grid;
      gap: clamp(12px, 1.8vw, 18px);
      margin: clamp(16px, 2vw, 28px) 0 clamp(18px, 2.2vw, 32px);
    }

    .title {
      font-weight: 800;
      letter-spacing: .01em;
      line-height: 1.15;
      font-size: clamp(28px, 4.4vw, 56px);
      margin: 0;
    }

    /* Book description and subtitle should match size */
    .subhead, .book-desc {
      font-size: clamp(15px, 1.3vw + .6rem, 18px); /* same size for both */
      color: var(--ink);
      margin: 0;
    }

    .key-points {
      list-style: disc;
      list-style-position: inside; /* no indentation */
      padding-left: 0; /* no indentation */
      margin: clamp(8px, 1.2vw, 14px) 0 0;
      display: grid;
      gap: 6px;
    }

    /* ===== CARD LAYOUT ===== */
    .grid {
      display: grid;
      gap: clamp(16px, 2vw, 24px);
    }

    @media (min-width: 900px) {
      .grid { grid-template-columns: 1.1fr .9fr; align-items: start; }
    }

    .card {
      background: var(--card);
      border-radius: var(--radius-xl);
      box-shadow: var(--shadow-md);
      padding: clamp(16px, 2.5vw, 28px);
      border: 1px solid rgba(25,25,25,.06);
    }

    /* ===== CALCULATOR ===== */
    .calculator header { margin: 0 0 10px; }
    .calculator h2 {
      margin: 0 0 4px;
      font-size: clamp(18px, 2.4vw, 26px);
      line-height: 1.2;
    }
    .calculator p { margin: 0; color: var(--muted); font-size: clamp(13px, 1.1vw + .4rem, 15px); }

    .form {
      display: grid;
      gap: clamp(12px, 1.5vw, 16px);
      margin-top: clamp(10px, 1.5vw, 14px);
    }

    .row {
      display: grid;
      gap: 12px;
      grid-template-columns: 1fr 1fr;
    }
    @media (max-width: 600px) {
      .row { grid-template-columns: 1fr; }
    }

    label { font-weight: 600; font-size: 14px; }

    input[type="number"], input[type="text"], input[type="email"], select, textarea {
      width: 100%;
      border: 1px solid rgba(25,25,25,.12);
      border-radius: 14px;
      padding: 12px 14px;
      background: #fff;
      box-shadow: var(--shadow-sm) inset;
      outline: none;
      transition: border .2s ease, box-shadow .2s ease, transform .02s ease;
    }
    input:focus, select:focus, textarea:focus { border-color: var(--ink); box-shadow: 0 0 0 4px rgba(25,25,25,.08); }

    .hint { color: var(--muted); font-size: 12px; margin-top: 4px; }
    .error { color: #b42318; font-size: 12px; margin-top: 6px; display: none; }

    /* Buttons (Anton, ALL CAPS, letter-spacing 0.175em) */
    .btn {
      font-family: 'Anton', system-ui, sans-serif;
      text-transform: uppercase;
      letter-spacing: 0.175em; /* requested */
      border: 1px solid var(--ink);
      background: var(--ink);
      color: #fff;
      padding: 14px 18px;
      border-radius: 16px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      line-height: 1;
      transition: transform .06s ease, box-shadow .2s ease, background .2s ease, color .2s ease;
      box-shadow: 0 8px 20px rgba(0,0,0,.12);
      min-height: 48px;
    }
    .btn:hover { transform: translateY(-1px); box-shadow: 0 10px 26px rgba(0,0,0,.16); }
    .btn:active { transform: translateY(0); }

    .btn.outline { background: #fff; color: var(--ink); }

    .btnbar {
      display: grid;
      grid-template-columns: 1fr;
      gap: 10px;
      margin-top: 6px;
    }
    @media (min-width: 520px) {
      .btnbar { grid-template-columns: 1fr 1fr; }
    }

    .cta-row {
      display: grid;
      gap: 10px;
      grid-template-columns: 1fr;
      margin-top: 14px;
    }
    @media (min-width: 720px) {
      .cta-row { grid-template-columns: repeat(4, 1fr); }
    }

    /* ===== VISUAL POLISH FOR MOBILE ===== */
    .card { backdrop-filter: saturate(120%) blur(2px); }
    .badge {
      display: inline-block;
      font-size: 12px;
      padding: 6px 10px;
      border-radius: 999px;
      background: #fff;
      border: 1px solid rgba(25,25,25,.08);
      box-shadow: var(--shadow-sm);
    }

    /* ===== FOOTER ===== */
    footer { color: var(--muted); text-align: center; padding: 28px 0 40px; font-size: 13px; }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1 class="title">Bad Peach Meal Plan Generator</h1>
      <p class="book-desc">Generate your custom 7‑day meal plans that are designed with your exact daily calories and protein results from above. Designed to help you hit your fitness goals. Know what to eat and how much to eat each week using the custom Bad Peach meal plan generator.</p>
      <p class="subhead">Dialed for mobile. Gorgeous on desktop. Built for busy Bombshells.</p>
      <ul class="key-points">
        <li>USDA‑verified calories + protein targets</li>
        <li>Simple, repeatable recipes with grocery lists</li>
        <li>Meal‑prep friendly with minimal waste</li>
      </ul>
    </header>

    <div class="grid">
      <!-- Left: Calculator Card -->
      <section class="card calculator" aria-labelledby="calcTitle">
        <header>
          <div class="badge">Calculator</div>
          <h2 id="calcTitle">Your Weekly Targets</h2>
          <p>Enter your details. Email is required to receive your results report.</p>
        </header>

        <form id="calcForm" class="form" novalidate>
          <!-- Required Email (inside calculator box) -->
          <div class="field">
            <label for="email">Best email to send your results report<span aria-hidden="true"> *</span></label>
            <input id="email" name="email" type="email" inputmode="email" placeholder="you@domain.com" autocomplete="email" />
            <div class="hint">We’ll send your PDF + grocery list here.</div>
            <div id="emailError" class="error">Please enter a valid email to continue.</div>
          </div>

          <div class="row">
            <div class="field">
              <label for="calories">Calories / day</label>
              <input id="calories" name="calories" type="number" inputmode="numeric" min="1100" max="4000" step="50" placeholder="e.g., 1900" />
            </div>
            <div class="field">
              <label for="protein">Protein / day (g)</label>
              <input id="protein" name="protein" type="number" inputmode="numeric" min="60" max="250" step="5" placeholder="e.g., 150" />
            </div>
          </div>

          <div class="row">
            <div class="field">
              <label for="meals">Meals per day</label>
              <select id="meals" name="meals">
                <option value="3">3</option>
                <option value="4" selected>4</option>
              </select>
            </div>
            <div class="field">
              <label for="grocery">Preferred grocery store</label>
              <select id="grocery" name="grocery">
                <option value="Costco" selected>Costco</option>
                <option value="Aldi">Aldi</option>
                <option value="Trader Joe’s">Trader Joe’s</option>
              </select>
            </div>
          </div>

          <div class="row">
            <div class="field">
              <label for="breakfastRot">Breakfast recipes (1–7)</label>
              <input id="breakfastRot" name="breakfastRot" type="number" min="1" max="7" step="1" placeholder="e.g., 3" />
            </div>
            <div class="field">
              <label for="snackRot">Snack recipes (0–7)</label>
              <input id="snackRot" name="snackRot" type="number" min="0" max="7" step="1" placeholder="e.g., 4" />
            </div>
          </div>

          <div class="field">
            <label for="dinnerRot">Dinner recipes (1–7)</label>
            <input id="dinnerRot" name="dinnerRot" type="number" min="1" max="7" step="1" placeholder="e.g., 6" />
          </div>

          <div class="btnbar">
            <button type="submit" id="btnCalculate" class="btn">Calculate</button>
            <button type="button" id="btnReset" class="btn outline">Reset</button>
          </div>

          <div class="cta-row">
            <a class="btn outline" href="#details" id="btnDetails">View All Book Details</a>
            <a class="btn outline" href="https://instagram.com" target="_blank" rel="noopener" id="btnIG">Follow on Instagram</a>
            <a class="btn outline" href="#" id="btnTerms">Terms</a>
            <a class="btn outline" href="#" id="btnPrivacy">Privacy</a>
          </div>
        </form>
      </section>

      <!-- Right: Preview / Info Card -->
      <aside class="card" aria-live="polite">
        <div class="badge">Preview</div>
        <h3 style="margin: 8px 0 6px; font-size: clamp(16px, 2.2vw, 22px);">Your Meal Plan Summary</h3>
        <p style="margin:0; color: var(--muted);">A quick peek at what you’ll receive by email: 7‑day schedule, grocery list, and batch‑prep guide.</p>
        <ul class="key-points" style="margin-top: 10px">
          <li><strong id="pvCalories">—</strong> calories/day</li>
          <li><strong id="pvProtein">—</strong> g protein/day</li>
          <li><strong id="pvMeals">—</strong> meals/day</li>
          <li><strong id="pvGrocery">—</strong> grocery store</li>
        </ul>
      </aside>
    </div>

    <footer>
      © <span id="year"></span> Bad Peach Fitness — All rights reserved.
    </footer>
  </div>

  <script>
    // Utility: basic email regex (pragmatic)
    const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/i;

    const form = document.getElementById('calcForm');
    const email = document.getElementById('email');
    const emailError = document.getElementById('emailError');
    const btnCalc = document.getElementById('btnCalculate');

    const pvCalories = document.getElementById('pvCalories');
    const pvProtein  = document.getElementById('pvProtein');
    const pvMeals    = document.getElementById('pvMeals');
    const pvGrocery  = document.getElementById('pvGrocery');

    const getVals = () => ({
      email: email.value.trim(),
      calories: document.getElementById('calories').value.trim() || '—',
      protein: document.getElementById('protein').value.trim() || '—',
      meals: document.getElementById('meals').value,
      grocery: document.getElementById('grocery').value,
      breakfastRot: document.getElementById('breakfastRot').value.trim(),
      snackRot: document.getElementById('snackRot').value.trim(),
      dinnerRot: document.getElementById('dinnerRot').value.trim(),
    });

    function updatePreview() {
      const v = getVals();
      pvCalories.textContent = v.calories;
      pvProtein.textContent  = v.protein;
      pvMeals.textContent    = v.meals;
      pvGrocery.textContent  = v.grocery;
    }

    const inputs = document.querySelectorAll('input, select');
    inputs.forEach(i => i.addEventListener('input', updatePreview));
    updatePreview();

    function validateEmailField() {
      const val = email.value.trim();
      const isEmpty = val === "";
      const looksValid = emailPattern.test(val);
      const isValid = isEmpty || looksValid; // empty is allowed, valid format passes
      email.setAttribute('aria-invalid', String(!isValid && !isEmpty));
      emailError.style.display = (!isEmpty && !looksValid) ? 'block' : 'none';
      return isValid;
    }

    email.addEventListener('input', validateEmailField);

    // Reset
    document.getElementById('btnReset').addEventListener('click', () => {
      form.reset();
      updatePreview();
      emailError.style.display = 'none';
    });

    // ===== Beacons Wiring (Replace ENDPOINT + KEY) =====
    async function sendToBeacons(email, payload) {
      /*
        HOW TO CONNECT TO BEACONS.AI
        1) Create a form or automation in Beacons and obtain the submission endpoint (HTTP POST URL) and any required API keys/headers.
        2) Replace the placeholders below with your actual endpoint + headers. If Beacons provides a direct form endpoint, you can post FormData instead of JSON.
      */
      const ENDPOINT = 'https://api.beacons.ai/v1/forms/YOUR_FORM_ID/submissions'; // <— replace with your real endpoint
      const API_KEY  = 'YOUR_API_KEY'; // <— if required

      try {
        const res = await fetch(ENDPOINT, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${API_KEY}`
          },
          body: JSON.stringify({
            email,
            fields: payload
          })
        });
        if (!res.ok) throw new Error('Network response was not ok');
        return true;
      } catch (err) {
        console.warn('Beacons submission failed; falling back to local save. Error:', err);
        return false;
      }
    }

    // Submit
    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      validateEmailField(); // soft-validate only; never blocks submission

      // Gather values
      const vals = getVals();

      // Disable button during submit
      btnCalc.disabled = true;
      btnCalc.textContent = 'Processing…';

      // Attempt Beacons submission
      let beaconsOk = false;
      if (emailPattern.test(vals.email.trim())) {
        beaconsOk = await sendToBeacons(vals.email.trim(), vals);
      }

      // Minimal UX feedback
      btnCalc.textContent = beaconsOk ? 'Done! Check your email' : 'Done!';
      setTimeout(() => {
        btnCalc.textContent = 'Calculate';
        btnCalc.disabled = false;
      }, 2200);

      // Local fallback: store payload (for dev/testing)
      try {
        const submissions = JSON.parse(localStorage.getItem('bp_submissions') || '[]');
        submissions.push({ ...vals, ts: new Date().toISOString() });
        localStorage.setItem('bp_submissions', JSON.stringify(submissions));
      } catch {}

      // Here you can trigger your on-page generation if desired
      // window.location.href = '#results';
    });

    // Footer year
    document.getElementById('year').textContent = new Date().getFullYear();
  </script>
</body>
</html>
